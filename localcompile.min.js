localcompile.js:258: WARNING - Suspicious code. This code lacks side-effects. Is there a bug?
                return (false, null, '', '', 'Missing c file %s for header %s' % (c_filename, filename));
                        ^^^^^

localcompile.js:258: WARNING - Suspicious code. This code lacks side-effects. Is there a bug?
                return (false, null, '', '', 'Missing c file %s for header %s' % (c_filename, filename));
                               ^^^^

localcompile.js:258: WARNING - Suspicious code. Is there a missing '+' on the previous line?
                return (false, null, '', '', 'Missing c file %s for header %s' % (c_filename, filename));
                                     ^^

localcompile.js:258: WARNING - Suspicious code. Is there a missing '+' on the previous line?
                return (false, null, '', '', 'Missing c file %s for header %s' % (c_filename, filename));
                                         ^^

localcompile.js:258: WARNING - Suspicious code. This code lacks side-effects. Is there a bug?
                return (false, null, '', '', 'Missing c file %s for header %s' % (c_filename, filename));
                                                                                  ^^^^^^^^^^

0 error(s), 5 warning(s)
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var e=a.length;0<e&&0<c;)if(b[--c]!=a[--e])return!1;return 0>=e}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
var fs=require("fs"),os=require("os"),path=require("path"),$jscomp$destructuring$var0=require("child_process"),exec=$jscomp$destructuring$var0.exec,compiler_output="",library_order=[],external_libraries=[],external_libraries_info={},source_directory="",configs={"c-libraries":"","c-compiler":""},tt=new Date;
document.localProject={board:"activity-board",code:'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',created:tt,description:"","description-html":"",id:0,modified:tt,name:"cool new project","private":!0,shared:!1,type:"PROPC",user:"offline",yours:!0};var c_cmp=["/","Users",os.userInfo().username,"Documents","SimpleIDE","Learn","Simple Libraries"],c_pth="/ Applications SimpleIDE.app Contents propeller-gcc bin propeller-elf-gcc".split(" ");"Windows"===navigator.browserSpecs.system&&(c_pth="/;Program Files (x86);SimpleIDE;propeller-gcc;bin;propeller-elf-gcc".split(";"));
$("meta[name=c-libraries-path]").attr("content")&&(c_cmp=$("meta[name=c-libraries-path]").attr("content").split("|"));$("meta[name=c-compiler-path]").attr("content")&&(c_pth=$("meta[name=c-compiler-path]").attr("content").split("|"));for(var i=0;i<c_cmp.length;i++)configs["c-libraries"]=path.join(configs["c-libraries"],c_cmp[i]);for(i=0;i<c_pth.length;i++)configs["c-compiler"]=path.join(configs["c-compiler"],c_pth[i]);console.log(c_cmp);console.log(c_pth);
var compile_actions={COMPILE:{"compile-options":[],extension:".elf","return-binary":!1},BIN:{"compile-options":[],extension:".elf","return-binary":!0},EEPROM:{"compile-options":[],extension:".elf","return-binary":!0}};function oswalk(a,b){"function"!==typeof b&&(b=function(a,b){});fs.readdir(a,function(c,d){if(c)return b(c);d.forEach(function(c){var d=path.join(a,c);fs.stat(d,function(a,c){c&&c.isDirectory()?oswalk(d,b):b(null,d)})})})}var lib_files={},lib_includes={};
oswalk(configs["c-libraries"],function(a,b){if(a)return a;var c=b.split(path.sep),d=c[c.length-1].split(".");if("h"===d[1]||"c"===d[1])a=c.pop(),lib_files[a]=c.join("/"),"h"===d[1]&&(b=fs.readFileSync(path.join(b),"utf8"),lib_includes[a]=parse_includes(b))});
function localCompile(a,b,c,d,e,h){source_directory=fs.mkdtempSync(path.join(os.tmpdir(),"pgc-"));c_file_data={};h_file_data={};for(var f in b)if(f.endsWith(".h")){d="string"===typeof b[f]||b[f]instanceof String?b[f]:b[f].stream.read();fs.writeFileSync(path.join(source_directory,f),d);c_filename=f.slice(0,-1)+"c";if(-1===b.toString().indexOf(c_filename))return!1,null,"","",NaN%(c_filename,f);h_file_data[f]={c_filename:c_filename}}for(f in b)f.endsWith(".c")&&(d="",d="string"===typeof b[f]||b[f]instanceof
String?b[f]:b[f].stream.read(),fs.writeFileSync(path.join(source_directory,f),d),c_file_data[f]={includes:parse_includes(d)},h_filename=f.slice(0,-1)+"h",-1!==b.toString().indexOf(h_filename)?c_file_data[f].library=!0:c_file_data[f].library=!1);compiler_output="";library_order=[];external_libraries=[];external_libraries_info={};for(b=0;b<c_file_data[c].includes.length;b++)determine_order(c_file_data[c].includes[b],h_file_data,c_file_data);for(b=0;b<external_libraries.length;b++)find_dependencies(external_libraries[b]);
0<external_libraries.length&&(compiler_output+="Included libraries: "+external_libraries.join(", ")+"\n");0<library_order.length&&(compiler_output+="Library compile order: "+library_order.join(", ")+"\n");success=!0;compile_binary(source_directory,a,c,library_order,external_libraries_info,e,function(a){return h(a)})}function cleanUpAll(a){deleteFolderRecursive(a);compiler_output="";library_order=[];external_libraries=[];external_libraries_info={};source_directory=""}
function determine_order(a,b,c){if(-1===library_order.toString().indexOf(a))if(-1<b.toString().indexOf(a+".h")){var d=c[b[a+".h"].c_filename].includes,e;for(e in d)determine_order(e,b,c);library_order.push(a)}else-1===external_libraries.toString().indexOf(a)&&external_libraries.push(a)}
var find_dependencies=function(a){for(var b in lib_files)if(-1<b.indexOf(a+".h")&&-1<lib_files[b].indexOf("/lib"+a)){external_libraries_info[a]=lib_files[b];library_order.push(a);for(var c=lib_includes[b],d=0;d<c.length;d++)-1===Object.keys(external_libraries_info).toString().indexOf(c[d])&&find_dependencies(c[d])}};
function compile_lib(a,b,c,d,e,h){var f=a+" -> Compiling "+b+" into "+c+"\n";executing_data=create_lib_executing_data(b,c,d,e);f+=executing_data.join(" ");exec(executing_data.join(" ").replace(/\/Simple Libraries\//g,"/'Simple Libraries'/"),{cwd:a},function(a,b,c){if(a)return cleanUpAll(source_directory),callabck([!1,"","Compiler not found\n"]);console.log(b);console.log(c);cleanUpAll(source_directory);return h([!0,"Library compile successful\n",null])})}
function compile_binary(a,b,c,d,e,h,f){var k="usr"+Math.random().toString(36).substring(2,10)+"pgc"+compile_actions[b.toUpperCase()].extension;k=path.join(a,k);var l="";executing_data=create_executing_data(path.join(source_directory,c),k,d,e,h);l+=executing_data.join(" ");fs.open(k,"w+",function(c,d){new Uint8Array;if(c)return cleanUpAll(source_directory),f({error:c,message:"Unable to open binary file.",success:!1,binary:null,extension:null});exec(executing_data.join(" ").replace(/\/Simple Libraries\//g,
"/'Simple Libraries'/"),{cwd:a},function(a,c,e){var g={error:e,details:c,message:"Compiler not found.",success:!1,binary:null,extension:null};if(a)return cleanUpAll(source_directory),g.error=a,g.message="Compiler Error: "+c+"\n\n"+e,f(g);g.message="Compile successful!";g.details=c;g.success=!0;g.extension=compile_actions[b.toUpperCase()].extension;if(compile_actions[b.toUpperCase()]["return-binary"])fs.readFile(d,function(a,b){if(a)return cleanUpAll(source_directory),g.error=a,g.message="Unable to read compiled file: "+
c+"\n\n"+e,f(g);g.binary=_arrayBufferToBase64(b);cleanUpAll(source_directory);return f(g)});else return cleanUpAll(source_directory),f(g)})})}function deleteFolderRecursive(a){fs.existsSync(a)&&-1<a.indexOf("pgc-")&&(fs.readdirSync(a).forEach(function(b,c){b=path.join(a,b);fs.lstatSync(b).isDirectory()?deleteFolderRecursive(b):fs.unlinkSync(b)}),fs.rmdirSync(a))}
function _arrayBufferToBase64(a){var b="";a=new Uint8Array(a);for(var c=a.byteLength,d=0;d<c;d++)b+=String.fromCharCode(a[d]);return window.btoa(b)}function parse_includes(a){icl=[];a.replace(/#include[ ]+["<](\w+).h[">]/g,function(a,c){icl.push(c)});return icl}
function create_lib_executing_data(a,b,c,d){executable=configs["c-compiler"];executing_data=[executable];executing_data.push("-I");executing_data.push(".");executing_data.push("-L");executing_data.push(".");for(var e in c)executing_data.push("-I"),executing_data.push(c[e]),executing_data.push("-L"),executing_data.push(c[e]+"/cmm");executing_data.push(d||"-O0");executing_data.push("-mcmm");executing_data.push("-m32bit-doubles");executing_data.push("-std=c99");executing_data.push("-c");executing_data.push(a);
executing_data.push("-o");executing_data.push(b);return executing_data}
function create_executing_data(a,b,c,d,e){executable=configs["c-compiler"];executing_data=[executable];executing_data.push("-I");executing_data.push(".");executing_data.push("-L");executing_data.push(".");for(var h in d)executing_data.push("-I"),executing_data.push(d[h]),executing_data.push("-L"),executing_data.push(d[h]+"/cmm");executing_data.push("-o");executing_data.push(b);executing_data.push(e||"-O0");executing_data.push("-mcmm");executing_data.push("-m32bit-doubles");executing_data.push("-std=c99");
executing_data.push(a);executing_data.push("-Wl,--start-group");executing_data.push("-lm");a=Object.keys(d);for(b=0;b<a.length;b++)executing_data.push("-l"+a[b]);executing_data.push("-Wl,--end-group");return executing_data}var localSaveAs=function(a,b){fs.writeFileSync(a,b)},localSaveMultiplefiles=function(a,b){for(var c=0;c<a.length;c++)fs.writeFileSync(a[c],b[c])};
